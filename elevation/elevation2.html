<!DOCTYPE html>
<html>

<head>
<head>

<style> html, body, #map, #elevation-div { height: 100%; width: 100%; padding: 0; margin: 0; } #map { height: 75%; } #elevation-div {	height: 25%; font: 12px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif; } </style>

<!-- leaflet-ui -->
<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet-ui/dist/locales/en-US.js"></script>

<!-- leaflet-elevation -->

<link rel="stylesheet" href="https://unpkg.com/@raruto/leaflet-elevation/dist/leaflet-elevation.css" />
<script src="https://unpkg.com/@raruto/leaflet-elevation/dist/leaflet-elevation.js"></script>

<!-- mbtiles leaflet -->
<script src="https://unpkg.com/sql.js@0.3.2/js/sql.js"></script>
<script src="Leaflet.TileLayer.MBTiles.js"></script>
    
</head>


</head>

<body>

<div id="map" class="leaflet-map"></div>

<script>
    let opts = {
        map: {
            center: [42.425551224805545, -84.03912185207182],
            zoom: 5,
            fullscreenControl: false,
            resizerControl: true,
            preferCanvas: true,
            rotate: true,
            // bearing: 45,
            rotateControl: {
                closeOnZeroBearing: true
            },
        },
        elevationControl: {
            url: "Evening_Run.gpx",
            options: {
                theme: "lightblue-theme",
                collapsed: false,
                autohide: false,
                autofitBounds: true,
                position: "bottomleft",
                detached: true,
                summary: "inline",
                imperial: false,
                // altitude: "disabled",
                slope: "disabled",
                speed: false,
                acceleration: false,
                time: "summary",
                legend: true,
                followMarker: true,
                almostOver: true,
                distanceMarkers: false,
                hotline: false,
            },
        },
        layersControl: {
            options: {
                collapsed: false,
            },
        },
    };

    let map = L.map('map', opts.map);

    let mb = L.tileLayer.mbTiles('tiles_test.mbtiles', {
        minZoom: 12,
        maxZoom: 12
    }).addTo(map);

    let controlElevation = L.control.elevation(opts.elevationControl.options).addTo(map);
    let controlLayer = L.control.layers(null, null, opts.layersControl.options);

    controlElevation.on('eledata_loaded', ({layer, name}) => controlLayer.addTo(map) && layer.eachLayer((trkseg) => trkseg.feature.geometry.type != "Point" && controlLayer.addOverlay(trkseg, trkseg.feature && trkseg.feature.properties && trkseg.feature.properties.name || name)));

    controlElevation.load(opts.elevationControl.url);
</script>

<!-- i18n -->
<script>
    // Register a custom locale
    L.registerLocale('en:18', {
        "Acceleration"      : "Acceleration",
        "Altitude"          : "Elevation",
        "Slope"             : "Slope",
        "Speed"             : "Velocity",
        "Total Length: "    : "L: ",
        "Max Elevation: "   : "E Max: ",
        "Min Elevation: "   : "E Min: ",
        "Avg Elevation: "   : "E Avg: ",
        "Total Time: "      : "T: ",
        "Total Ascent: "    : "Asc: ",
        "Total Descent: "   : "Desc: ",
        "Min Slope: "       : "S Min: ",
        "Max Slope: "       : "S Max: ",
        "Avg Slope: "       : "S Avg: ",
        "Min Speed: "       : "V Min: ",
        "Max Speed: "       : "V Max: ",
        "Avg Speed: "       : "V Avg: ",
        "Min Acceleration: ": "A Min: ",
        "Max Acceleration: ": "A Max: ",
        "Avg Acceleration: ": "A Avg: ",
    });

    // Enable a custom locale
    // L.setLocale('en:18');

    // You can also override a previously defined object
    L.locales['en'] = L.extend({
        "y: "               : "",
        "x: "               : "",
        "t: "               : "",
        "T: "               : "",
        "m: "               : "",
        "v: "               : "",
        "a: "               : "",
    }, L.locales['en']);

    // Switch the language
    L.setLocale('en');

</script>

<a href="https://github.com/Raruto/leaflet-elevation" class="view-on-github" style="position: fixed;top: 30px;left: calc(50% - 81px);z-index: 9999;"> <img alt="View on Github" src="https://raruto.github.io/img/view-on-github.png" title="View on Github" width="163"> </a>

</body>

</html>
