<!DOCTYPE html>
<html>

<head>
  <head>
    <!-- basic leaflet code-->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
     integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
     crossorigin=""/>
  
    <link rel="stylesheet" href="Style.css">

     <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
     integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
     crossorigin=""></script>
<!-- mbtiles files -->
    <script src="https://unpkg.com/sql.js@0.3.2/js/sql.js"></script>

      <script src="Leaflet.TileLayer.MBTiles.js"></script>  
    
<!-- leaflet-elevation -->

<link rel="stylesheet" href="https://unpkg.com/@raruto/leaflet-elevation/dist/leaflet-elevation.css" />
<script src="https://unpkg.com/@raruto/leaflet-elevation/dist/leaflet-elevation.js"></script>
  </head>

	<style>
		.leaflet-tooltip {
			font-weight: 700;
		}
	</style>

</head>

<body>

	<div id="map" class="leaflet-map"></div>

	<script>
		//var map = L.map('map').setView([42.42263,-83.98761], 12);

		let map = L.map('map', opts.map);
      	
      		var mb = L.tileLayer.mbTiles('test_multilayer.mbtiles', {
      			minZoom: 5,
      			maxZoom: 12
      		}).addTo(map);
      	
      		mb.on('databaseloaded', function(ev) {
      			console.info('MBTiles DB loaded', ev);
      		});
      		mb.on('databaseerror', function(ev) {
      			console.info('MBTiles DB error', ev);
      		});
		
		let opts = {
			map: {
				center: [42.75393411362465, -84.46925036588932],
				minZoom: 5,
				maxZoom: 12,
				plugins: [
					"d3@7.8.4/dist/d3.min.js",
					"@tmcw/togeojson@5.6.2/dist/togeojson.umd.js",
					"leaflet-geometryutil@0.9.3/src/leaflet.geometryutil.js",
					"leaflet-almostover@1.0.1/src/leaflet.almostover.js",
					"@raruto/leaflet-elevation@2.5.1/libs/leaflet-distance-marker.css",
					"@raruto/leaflet-elevation@2.5.1/libs/leaflet-distance-marker.js",
					"@raruto/leaflet-elevation@2.5.1/dist/leaflet-elevation.min.css",
					"@raruto/leaflet-elevation@2.5.1/dist/leaflet-elevation.min.js",
					"@raruto/leaflet-elevation@2.5.1/libs/leaflet-gpxgroup.js",
					// "../libs/leaflet-distance-marker.css",
					// "../libs/leaflet-distance-marker.js",
					// "../dist/leaflet-elevation.css",
					// "../dist/leaflet-elevation.js",
					// "../libs/leaflet-gpxgroup.js",
				],
			},
			points: {
				icon: {
					iconUrl: 'https://unpkg.com/@raruto/leaflet-elevation@1.3.5/images/elevation-poi.png',
					iconSize: [12, 12],
				},
			},
			elevation: {
				theme: "lime-theme",
				detached: true,
				collapsed: false,
				autohide: false,
				width: 600,
				edgeScale: false,
			},
		};

		let tracks = [
			"Woodstock.gpx",
			"100M_50M.gpx",
			// "demo.tcx",
			// "demo.kml",
			// "demo.geojson",
		];

		let points = [
			
		];

		let map = L.map('map', opts.map);

		let routes;

		map.on('plugins_loaded', function(e) {

			routes = L.gpxGroup(tracks, {
				points: points,
				points_options: opts.points,
				elevation: true,
				elevation_options: opts.elevation,
				legend: false,
				distanceMarkers: true,
			});

			routes.addTo(map);

			map.attributionControl.addAttribution('Map Data: &copy; <a href="https://github.com/adoroszlai">Attila Doroszlai</a> (<a href="https://github.com/adoroszlai/joebed/blob/gh-pages/LICENSE.md">MIT License</a>)');

		});

	</script>

	<a href="https://github.com/Raruto/leaflet-elevation" class="view-on-github" style="position: fixed;bottom: 10px;left: calc(50% - 60px);z-index: 9999;"> <img alt="View on Github" src="https://raruto.github.io/img/view-on-github.png" title="View on Github" width="163"> </a>

</body>

</html>
